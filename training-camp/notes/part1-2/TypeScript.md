# TypeScript è¯­è¨€

## JS ç±»å‹ç³»ç»Ÿé—®é¢˜

åœ¨è®² JS é—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä»€ä¹ˆæ˜¯å¼ºç±»å‹ä¸å¼±ç±»å‹ï¼Œä»€ä¹ˆæ˜¯é™æ€ç±»å‹ä¸åŠ¨æ€ç±»å‹ï¼Œå†å»åˆ†æ JS ç±»å‹ç³»ç»Ÿç‰¹å¾å’Œå­˜åœ¨çš„é—®é¢˜ã€‚

### å¼ºç±»å‹å’Œå¼±ç±»å‹

å¼ºç±»å‹å’Œå¼±ç±»å‹æ˜¯ä»ç±»å‹å®‰å…¨çš„è§’åº¦åšåˆ†ç±»ã€‚JS æ˜¯ä¸€ç§å¼±ç±»å‹è¯­è¨€ï¼Œè‡³äºå¼ºå¼±ä¹‹åˆ†æœ‰ä»€ä¹ˆå·®åˆ«å‘¢ï¼Ÿ

å¼ºç±»å‹æ˜¯ä»è¯­è¨€å±‚é¢å°±é™åˆ¶äº†å‡½æ•°çš„å®å‚ç±»å‹å¿…é¡»ä¸å½¢å‚ç±»å‹ç›¸åŒï¼Œä¸¾ä¸ª java çš„ä¾‹å­ï¼š

```java
class Main {
    static void foo (int num) {
        System.out.println(num);
    }
    public static void main (string[] args) {
        Main.foo(100); // ok

        // å‡½æ•°å®šä¹‰çš„å‚æ•°æ˜¯ int ç±»å‹ï¼Œå¦‚æœä¼ å…¥çš„æ˜¯å…¶ä»–ç±»å‹åœ¨ç¼–è¯‘é˜¶æ®µå°±æŠ¥é”™
        Main.foo("100"); // error "100" is a string

        // è¿™æ—¶å€™æˆ‘ä»¬å°±çŸ¥é“ï¼Œæˆ‘ä»¬éœ€è¦å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸º int ç±»å‹
        Main.foo(Integer.parseInt("100")); // ok
    }
}
```

è€Œå¼±ç±»å‹ä¸ä¼šé™åˆ¶å®å‚çš„ç±»å‹ã€‚

```js
function foo (num) {
    console.log(num);
}

foo(100); // ok
foo('100'); // ok
foo(parseInt('100')); // ok
```

å¯¹äºå¼ºç±»å‹å’Œå¼±ç±»å‹çš„åˆ’åˆ†ç•Œé™ï¼Œæ¯”è¾ƒè®¤åŒçš„è¯´æ³•æ˜¯ï¼Œå¼ºç±»å‹è¯­è¨€ä¸­ä¸å…è®¸ä»»æ„çš„éšå¼ç±»å‹è½¬æ¢ï¼Œè€Œå¼±ç±»å‹è¯­è¨€åˆ™å…è®¸ä»»æ„çš„æ•°æ®éšå¼ç±»å‹è½¬æ¢ã€‚

éšå¼ç±»å‹è½¬æ¢å°±æ˜¯å¦‚æœä½ ä¼ å…¥çš„ç±»å‹ä¸æ˜¯æƒ³è¦çš„ç±»å‹ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨å¸®ä½ è½¬æ¢ç±»å‹ï¼Œæ¯”å¦‚ï¼š

```js
'100' - 50;         // æœ€ç»ˆç»“æœæ˜¯ 50 ï¼Œ'100' ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸º 100 è¿›è¡Œè¿ç®—
Math.floor(true);   // æœ€ç»ˆç»“æœæ˜¯ 1ï¼Œå‡½æ•°å†…éƒ¨ true è¢«è‡ªåŠ¨è½¬åŒ–ä¸º 1 è¿›è¡Œå¤„ç†
```

å¦‚æœæ˜¯å¼ºç±»å‹ï¼Œä»¥ä¸Šçš„ä¾‹å­åœ¨ç¼–è¯‘é˜¶æ®µå°±ä¼šæŠ¥é”™ï¼Œä¸ä¼šè¿”å›ç»“æœã€‚

### é™æ€ç±»å‹ä¸åŠ¨æ€ç±»å‹

é™æ€ç±»å‹å’ŒåŠ¨æ€ç±»å‹æ˜¯ä»ç±»å‹æ£€æŸ¥çš„è§’åº¦åšåˆ†ç±»ã€‚

é™æ€ç±»å‹ä¸€æ—¦å˜é‡å£°æ˜ä¹‹åï¼Œå®ƒçš„ç±»å‹å°±æ˜¯æ˜ç¡®çš„ï¼Œä¸å…è®¸å†ä¿®æ”¹ã€‚

åŠ¨æ€ç±»å‹åœ¨è¿è¡Œé˜¶æ®µæ‰èƒ½çŸ¥é“å®ƒçš„ç±»å‹ï¼Œè€Œä¸”å˜é‡ç±»å‹å¯ä»¥éšæ—¶å‘ç”Ÿå˜åŒ–ã€‚ä¾‹å¦‚

```js
// å˜é‡å£°æ˜éƒ½æ˜¯ç”¨ var ï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆç±»å‹
// åªæœ‰å½“èµ‹å€¼ 100 ï¼Œæ‰çŸ¥é“ foo æ˜¯ number ç±»å‹
var foo = 100;

// å½“èµ‹å€¼äº† 'bar' ï¼Œå˜é‡ç±»å‹åˆå˜æˆ string
foo = 'bar';

console.log(foo);
```

æ‰€ä»¥åœ¨åŠ¨æ€ç±»å‹è¯­è¨€ä¸­çš„å˜é‡æ˜¯æ²¡æœ‰ç±»å‹çš„ï¼Œè€Œå˜é‡ä¸­å­˜æ”¾çš„å€¼æ˜¯æœ‰ç±»å‹çš„ã€‚

æ‰€ä»¥ JS æ˜¯ä¸€ä¸ªåŠ¨æ€ç±»å‹ã€‚ 

### JS ç±»å‹ç³»ç»Ÿç‰¹å¾

JS æ˜¯ä¸€ç§å¼±ç±»å‹ä¸”åŠ¨æ€ç±»å‹çš„è¯­è¨€ï¼Œæ‰€ä»¥ JS æ˜¯ä¸€é—¨çµæ´»å¤šå˜çš„è¯­è¨€ã€‚ä¸è¿‡çµæ´»çš„èƒŒåä¸¢å¤±çš„æ˜¯ç±»å‹ç³»ç»Ÿçš„å¯é æ€§ï¼Œè¿™å°±å¯¼è‡´æˆ‘ä»¬æ¯æ¬¡å¼•ç”¨ä¸€ä¸ªå˜é‡æ—¶éƒ½è¦æ‹…å¿ƒè¿™å˜é‡æ˜¯ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç±»å‹ã€‚

ä¸ºä»€ä¹ˆ JS ä¸è®¾è®¡æˆå¼ºç±»å‹ä¸”é™æ€ç±»å‹çš„è¯­è¨€å‘¢ï¼Ÿ

- æ—©æœŸ JS çš„åº”ç”¨ç®€å•ï¼Œä»£ç é‡å¾ˆå°‘ï¼Œè®¾è®¡æˆå¼ºç±»å‹çš„åè€Œè§‰å¾—éº»çƒ¦æ²¡æœ‰å¿…è¦ï¼›
- JS æ˜¯ä¸ªè„šæœ¬è¯­è¨€ï¼Œå®ƒä¸éœ€è¦ç¼–è¯‘å°±èƒ½ç›´æ¥è¿è¡Œï¼Œæ‰€ä»¥å®ƒæ²¡æœ‰ç¼–è¯‘ç¯èŠ‚ã€‚è€Œç±»å‹æ£€æŸ¥éœ€è¦åœ¨ç¼–è¯‘ç¯èŠ‚æ£€æµ‹çš„ï¼Œæ‰€ä»¥æ ¹æœ¬åšä¸æ¥ç±»å‹æ£€æŸ¥ï¼›

åŸºäºä¸Šè¿°çš„åŸå› ï¼ŒJS é€‰æ‹©æˆä¸ºæ›´åŠ çµæ´»å¤šå˜çš„å¼±ç±»å‹/åŠ¨æ€ç±»å‹è¯­è¨€ã€‚

ç°å¦‚ä»Š JS è¿ç”¨è¶Šæ¥è¶Šå¹¿ï¼Œéåœ°éƒ½æœ‰å¤§è§„æ¨¡çš„ JS åº”ç”¨ï¼Œç°åœ¨è¿™ç§å¼±ç±»å‹/åŠ¨æ€ç±»å‹è¯­è¨€å·²ç»ä¸å†ä¸é€‚åˆäº†ã€‚

### å¼±ç±»å‹çš„é—®é¢˜

è¿™è¾¹ä¸¾ä¸‰ä¸ªä¾‹å­æ¥è¯´æ˜è¿™é—®é¢˜ã€‚

#### é—®é¢˜1

```js
const obj = {};

obj.foo();
```

ä»¥ä¸Šä»£ç å¾ˆæ˜æ˜¾çš„èƒ½çœ‹å‡ºæ¥ obj å¹¶ä¸å­˜åœ¨ foo æ–¹æ³•ï¼Œè€Œæˆ‘ä»¬å»è°ƒç”¨å®ƒï¼Œè¿™åœ¨è¯­æ³•å±‚é¢ä¸Šæ˜¯æ²¡é—®é¢˜çš„ã€‚åªæœ‰å½“æˆ‘ä»¬è¿è¡Œäº†è¿™æ®µä»£ç æ‰æŠ›å‡ºå¼‚å¸¸ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ JS è¿™ç§å¼±ç±»å‹çš„è¯­è¨€é‡Œåªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½æ£€æµ‹åˆ°ç±»å‹å¼‚å¸¸ã€‚ä»¥ä¸Šä»£ç æ˜¯åœ¨è¿è¡Œæ—¶å°±ç«‹å³æ‰§è¡Œï¼Œå¦‚æœæˆ‘ä»¬æ˜¯é€šè¿‡è§¦å‘æŸä¸ªäº‹ä»¶æ‰å»æ‰§è¡Œçš„å‘¢ï¼Ÿä¾‹å¦‚ï¼š

```js
const obj = {};

setTimeout(() => {
    obj.foo();
}, 100000);
```

æˆ‘ä»¬è¿™è¾¹ç”¨ setTimeout æ¥æ¨¡æ‹Ÿï¼Œè¿™ç§åœ¨ç¨‹åºåˆšæ‰è¿è¡Œçš„æ—¶å€™æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå½“ä»£ç æ‰§è¡Œåˆ° `obj.foo()` çš„æ—¶å€™æ‰ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ä¹Ÿå°±æ˜¯è¯´ä½ å¦‚æœæ²¡æœ‰æµ‹è¯•åˆ°è¿™æ®µä»£ç ï¼Œé‚£è¿™æ ·è¿™æ ·ä¸€ä¸ªéšæ‚£å°±ç•™åœ¨ä»£ç é‡Œã€‚å¦‚æœæ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œè¿™ç§åœ¨è¯­æ³•å±‚é¢å°±å·²ç»æŠ¥é”™äº†ï¼Œæ ¹æœ¬ä¸ç”¨ç­‰åˆ°ç¨‹åºè¿è¡Œåˆ°è¿™æ®µä»£ç æ‰çŸ¥é“ã€‚

#### é—®é¢˜äºŒ

```js
function sum (a, b) {
    return a + b;
}

console.log(sum(100, 100));     // 200
console.log(sum(100, '100'));   // 100100
```

è¿™å‡½æ•°åŸæœ¬æ˜¯æƒ³åšä¸€ä¸ªæ±‚å’Œè¿ç®—çš„å‡½æ•°ï¼Œé¢„æœŸçš„æ•ˆæœæ˜¯ä¸¤ä¸ªæ•°å€¼ç›¸åŠ ï¼Œå¯å¦‚æœä½ ä¼ å…¥å­—ç¬¦ä¸²ï¼Œè¿™åœ¨è¯­æ³•å±‚é¢æ˜¯æ²¡é—®é¢˜çš„ï¼Œå­—ç¬¦ä¸²å’Œæ•°å­—ä¹Ÿèƒ½ç›¸åŠ ï¼Œä½†å®é™…è¿”å›çš„ç»“æœè·Ÿé¢„æœŸçš„ä¸ä¸€æ ·ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå¾ˆå…¸å‹çš„ç±»å‹ä¸ç¡®å®šå¯¼è‡´å‡½æ•°çš„åŠŸèƒ½æœ‰å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚

#### é—®é¢˜ä¸‰

```js
const obj = {};

obj[true] = 100;
console.log(obj['true'])ï¼›  // 100
```

obj è®¾ç½®å€¼çš„æ—¶å€™å±æ€§åä¼ å…¥ä¸€ä¸ª true ï¼Œå®é™…å†…éƒ¨ä¼šæœ‰ä¸ªéšå¼è½¬åŒ–ï¼Œæœ€ç»ˆå˜æˆ 'true' ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ obj['true'] æ˜¯èƒ½è®¿é—®åˆ°çš„ã€‚è¿™ç§èµ‹å€¼è·Ÿå–å€¼ç”¨çš„å±æ€§åä¸ä¸€æ ·ï¼Œçœ‹ç€å°±å¾ˆå¥‡æ€ªï¼Œä¸äº†è§£è¿™ç‰¹æ€§çš„äººç”¨çš„æ—¶å€™å°±ä¼šè®©äººæ„Ÿåˆ°å¾ˆç–‘æƒ‘ã€‚

å¯¹è±¡å±æ€§ååªèƒ½æ”¯æŒå­—ç¬¦ä¸²å’Œ Symbol ï¼Œä¼ å…¥å…¶ä»–ç±»å‹åº”è¯¥æ˜¯ä¸å…è®¸çš„ï¼Œå¦‚æœæ˜¯ä½¿ç”¨å¼ºç±»å‹ï¼Œè¿™ç§åœ¨è¯­æ³•å±‚é¢ä¸Šå°±ä¼šæŠ¥é”™ã€‚å¦‚æœä¼ å…¥çš„éƒ½æ˜¯æ­£ç¡®çš„ç±»å‹ï¼Œä½¿ç”¨è€…å°±ä¼šå¾ˆæ˜ç¡®çš„çŸ¥é“æˆ‘è¦ç”¨å“ªä¸ªå±æ€§åå»å–å€¼ã€‚

### å¼ºç±»å‹çš„ä¼˜åŠ¿

#### é”™è¯¯æ›´æ—©æš´éœ²

è¿™ç‚¹åœ¨ â€œå¼±ç±»å‹çš„é—®é¢˜â€ å°èŠ‚å·²ç»èƒ½ä½“ç°å‡ºæ¥ï¼Œç±»å‹å¯¼è‡´çš„é—®é¢˜åœ¨è¯­æ³•å±‚é¢ä¸Šå°±ä¼šæŠ¥é”™ï¼Œæ ¹æœ¬ä¸ç”¨ç­‰åˆ°è¿è¡Œæ—¶æ‰çŸ¥é“ï¼Œæ‰€ä»¥é”™è¯¯èƒ½å¤Ÿæ›´æ—©çš„å‘ç°ã€‚

#### ä»£ç æ›´æ™ºèƒ½ï¼Œç¼–ç æ›´å‡†ç¡®

ç®€å•çš„è¯´å°±æ˜¯ç¼–è¯‘å™¨æ²¡æœ‰ä»£ç æç¤ºï¼Œé‚£ç§æœ‰å¤šç—›è‹¦å°±ä¸ç”¨æˆ‘è¯´äº†ï¼Œä¸¾ä¸ªä¾‹å­:

```js
function render (element) {
    element.className = 'container';
    element.innerHtml = 'hello world';
}
```

åœ¨æ–¹æ³•é‡Œä¼ å…¥ element å‚æ•°ï¼Œå¦‚æœ element æœ‰æŒ‡å®šæ•°æ®ç±»å‹ï¼Œç¼–è¯‘å™¨å°±èƒ½è¯†åˆ«è¿™ä¸ªç±»å‹ï¼Œåˆ—å‡ºè¿™ä¸ªå‚æ•°æ‰€æ‹¥æœ‰çš„å±æ€§å’Œæ–¹æ³•ã€‚åœ¨ç¼–ç è¿‡ç¨‹ä¸­æˆ‘å†™ `element.` ç„¶åç¼–è¯‘å™¨å°±ä¼šç»™å‡ºæ™ºèƒ½æç¤ºï¼Œå°±åƒä¸‹å›¾è¿™æ ·ï¼š

![](https://jencia.github.io/images/blog/training-camp/notes/TypeScript-1.gif)

å¯æˆ‘ä¸Šé¢å†™çš„ä»£ç æ˜¯å¼±ç±»å‹ï¼Œå¹¶æ²¡æœ‰è¿™åŠŸèƒ½ï¼Œéƒ½æ˜¯æ‰‹å†™çš„ï¼Œè¿˜å†™é”™äº†æœ‰æ²¡æœ‰å‘ç°ã€‚æœ‰äº†ä»£ç æç¤ºèƒ½å¤ŸåŠ å¿«æˆ‘ä»¬çš„ç¼–ç é€Ÿåº¦ï¼Œæ›´èƒ½è®©ç¼–ç æ›´å‡†ç¡®ã€‚

#### é‡æ„æ›´ç‰¢é 

åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå› ä¸ºå¼€å‘å‘¨æœŸæ¯”è¾ƒèµ¶ï¼Œç¼–å†™çš„ä»£ç æ¯”è¾ƒéšæ„ï¼Œæ¯”å¦‚ä½ å¯èƒ½å‡ºç°ç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š

```js
const util = {
    aaa: () => {
        console.log('util func');
    }
}
```

æœ‰ä¸€ä¸ªæ–¹æ³•åç§°å½“æ—¶å‘½åçš„æ¯”è¾ƒéšæ„ï¼Œç°åœ¨æƒ³æ”¹æ‰ã€‚å¯è¿™æ—¶å€™ä½ å…¨å±€æœç´¢ä¸‹ä½ å‘ç°æœ‰å¤ªå¤šåœ°æ–¹ç”¨åˆ°è¿™ä¸ªæ–¹æ³•äº†ï¼Œè¿™æ—¶å€™ä½ è´¸ç„¶æ”¹æ‰å¯èƒ½ä¼šå¼•å‘ä¸€äº› bug ã€‚æœ‰æ—¶å€™ä½ æ²¡æ³•ä¿è¯æ¯ä¸ªåœ°æ–¹éƒ½æ”¹æ‰ï¼Œä¸€æ—¦æ¼æ”¹äº†ä¸€ä¸ªä½ ä¹Ÿä¸çŸ¥é“ï¼Œåœ¨å¼±ç±»å‹é‡Œé¢åªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½çŸ¥é“æ˜¯å¦æœ‰é”™ï¼Œæˆ‘ä»¬åˆæ²¡æœ‰å†™å•å…ƒæµ‹è¯•ï¼Œä¸èƒ½ä¿è¯æµ‹è¯•æ–¹æ¡ˆèƒ½è¦†ç›–æ‰€æœ‰æƒ…å†µã€‚

è€Œå¦‚æœæ˜¯å¼ºç±»å‹çš„è¯ï¼Œä½ è¿™è¾¹æ”¹äº†æ–¹æ³•åç§°ï¼Œå…¶ä»–æœ‰ç”¨åˆ°è¿™æ–¹æ³•çš„åœ°æ–¹åœ¨è¯­æ³•å±‚é¢å°±ä¼šæŠ¥é”™ï¼Œä½ å°±å¯ä»¥æ ¹æ®æŠ¥é”™çš„åœ°æ–¹é€ä¸€æ”¹æ­£ã€‚

#### å‡å°‘ä¸å¿…è¦çš„ç±»å‹åˆ¤æ–­

åœ¨ JS é‡Œé¢å°è£…æ–¹æ³•æˆ‘ä»¬å¾€å¾€ä¸ºäº†ä¿è¯ç±»å‹çš„æ­£ç¡®æ€§ï¼Œéœ€è¦åšä¸€å †å…³äºå‚æ•°çš„ç±»å‹æ£€æŸ¥ä»£ç ï¼Œä¾‹å¦‚ï¼š

```js
function sum (a, b) {
    if (typeof a !== 'number' || typeof b !== 'number) {
        throw new TypeError('arguments must be a number');
    }
    return a + b;
}
```

æˆ‘ä»¬å»æ£€æµ‹ä¸¤ä¸ªå‚æ•°æ˜¯å¦éƒ½æ˜¯ number ï¼Œå¦‚æœä¸æ˜¯å°±æŠ›å¼‚å¸¸ã€‚å¦‚æœä¸šåŠ¡å¤æ‚ä¸€ç‚¹ï¼Œè¿™ç±»å‹çš„åˆ¤æ–­å°±æ›´å¤šäº†ã€‚

åœ¨å¼ºç±»å‹è¯­è¨€é‡Œé¢ï¼Œä¸ç¬¦åˆçš„ç±»å‹æ ¹æœ¬å°±ä¼ ä¸è¿›æ¥ï¼Œæ‰€ä»¥ä¹Ÿä¸éœ€è¦åšè¿™ä¸€å †æ“ä½œã€‚

## Flow

è¿™æ˜¯ä¸€ä¸ª JavaScript çš„ç±»å‹æ£€æŸ¥å™¨ã€‚

### å¿«é€Ÿä¸Šæ‰‹

å…ˆæ‰¾ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä½œä¸ºé¡¹ç›®å·¥ç¨‹ç›®å½•ï¼Œåç»­ç¼–å­¦ flow éƒ½åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹å»ºæ–‡ä»¶ã€‚

1. åˆå§‹åŒ–é¡¹ç›®å·¥ç¨‹ï¼Œè¿™è¾¹ä½¿ç”¨ [yarn](https://classic.yarnpkg.com/zh-Hans/docs/install#windows-stable) ã€‚

```sh
$ yarn init --yes
```

è¿™æ—¶å€™åœ¨ä½ çš„é¡¹ç›®å·¥ç¨‹ä¸‹å°±æœ‰ä¸€ä¸ª package.json æ–‡ä»¶

2. å®‰è£… flow-bin

```sh
$ yarn add flow-bin --dev
```

3. åˆå§‹åŒ– flow

```sh
$ yarn flow init
```

è¿™æ—¶å€™é¡¹ç›®å·¥ç¨‹ä¸‹ä¼šæœ‰ä¸ª `.flowconfig` æ–‡ä»¶ï¼Œåˆ°è¿™é‡Œ flow çš„ç¯å¢ƒå°±æ­å»ºå®Œäº†ã€‚

4. ç¼–ç 

```ts
// @flow

function sum (a: number, b: number) {
    return a + b
}

sum(100, 100)
sum('100', '100')
```

éœ€è¦ flow ç±»å‹æ£€æŸ¥çš„æ–‡ä»¶å°±åœ¨æ–‡ä»¶é¡¶éƒ¨åŠ ä¸Š `// @flow` ã€‚

flow å¢åŠ äº†ç±»å‹æ³¨è§£çš„å†™æ³•ï¼Œä¹Ÿå°±æ˜¯åœ¨å‚æ•°ååé¢è·Ÿä¸Šå†’å·ï¼ˆ : ï¼‰ï¼Œç„¶åç´§è·Ÿä¸Šç±»å‹åç§°ï¼Œä¹Ÿå°±æ˜¯è¿™è¾¹çš„ `a: number` å†™æ³•ã€‚ä¸è¿‡è¿™ç§å†™æ³•ç¼–è¯‘å™¨å¯èƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸º JS ä¸æ”¯æŒè¿™ç§è¯­æ³•ï¼Œæˆ‘ä»¬éœ€è¦æŠŠç¼–è¯‘å™¨çš„è¯­æ³•æ£€éªŒç¦æ‰ï¼Œåœ¨ VSCode é‡Œé¢è¿›å…¥é¦–é€‰é¡¹è®¾ç½®ç•Œé¢ï¼Œæœç´¢ â€œJavaScript validateâ€ï¼Œç„¶åæŠŠ â€œEnable/disable Javascript validationâ€ çš„æ‰“é’©å»æ‰ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š

![](https://jencia.github.io/images/blog/training-camp/notes/TypeScript-2.png)

è¿™æ ·ç¼–è¯‘å™¨å°±ä¸ä¼šæŠ¥é”™äº†ã€‚

5. æ ¡éªŒ

```sh
$ yarn flow
```

æ‰§è¡Œå®Œå‘½ä»¤è¡Œåï¼Œå¦‚æœæ£€æµ‹åˆ°ç±»å‹é”™è¯¯å°±ä¼šæ˜¾ç¤ºå‡ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼Œè¿˜æœ‰å¯¹åº”çš„æ–‡ä»¶è·Ÿä»£ç è¡Œæ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®ä¸Šé¢çš„é”™è¯¯ä¿¡æ¯æ”¹æ­£ä»£ç çš„é”™è¯¯ã€‚

### ç¼–è¯‘ç§»é™¤æ³¨è§£

æˆ‘ä»¬ä»£ç ä¸ŠåŠ  `:number` è¿™ç§ç±»å‹æ³¨è§£åå®é™…æµè§ˆå™¨è¿è¡Œæ—¶ä¸æ”¯æŒçš„ï¼Œæˆ‘ä»¬åªæ˜¯åœ¨ç¼–è¯‘çš„æ—¶å€™ä¸ºäº†ç±»å‹æ£€æµ‹è€Œæ·»åŠ çš„ï¼Œè€Œè¿è¡Œç¯å¢ƒæ˜¯éœ€è¦ç§»é™¤æ‰è¿™äº›ç±»å‹æ³¨è§£æ‰èƒ½è¿è¡Œçš„ã€‚å½“ç„¶æ‰‹åŠ¨å»åˆ é™¤ä¸å¤ªç°å®ï¼Œè¿™è¾¹æä¾›äº†ä¸¤ç§æ–¹å¼è‡ªåŠ¨ç§»é™¤æ³¨è§£ã€‚

#### flow-remove-types

è¿™æ˜¯ flow å®˜æ–¹å‡ºçš„ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œä¸“é—¨ç”¨æ¥ç§»é™¤æ³¨è§£ã€‚

1. å®‰è£…

```sh
$ yarn add flow-remove-types --dev
```

2. ä½¿ç”¨

```sh
$ yarn flow-remove-types . -d dist
```

æˆ‘ä»¬çš„ä»£ç æ”¾åœ¨å½“å‰ç›®å½•ï¼Œæ‰€ä»¥è·¯å¾„ä½¿ç”¨ "."ï¼Œè¿™æ®µå‘½ä»¤çš„æ„æ€å°±æ˜¯è®²å½“å‰è·¯å¾„ä¸‹çš„æ–‡ä»¶å…¨éƒ¨ç§»é™¤æ³¨è§£ï¼Œå¹¶æŠŠç§»é™¤ä¼šçš„ä»£ç æ–‡ä»¶æ”¾åœ¨ dist ç›®å½•ä¸‹ã€‚

æˆ‘ä»¬å°±èƒ½åœ¨ dist é‡Œæ‰¾åˆ°åŒæ ·æ–‡ä»¶åçš„æ–‡ä»¶è¢«å»æ‰äº†æ³¨è§£ã€‚

ä¸è¿‡æ­£å¸¸æˆ‘ä»¬çš„æºä»£ç åº”è¯¥æ”¾åœ¨ src ç›®å½•ï¼Œè¿™æ ·å°±èƒ½é¿å…æœ‰äº› node_modules é‡Œçš„ç¬¬ä¸‰æ–¹æ¨¡å—å—å½±å“ã€‚

é‚£å‘½ä»¤è¡Œå°±åº”è¯¥æ”¹æˆè¿™æ ·ï¼š

```sh
$ yarn flow-remove-types src -d dist
```

#### babel

è¯´åˆ°ç¼–è¯‘ï¼Œå½“ä¸‹æœ€æµè¡Œçš„å°±æ˜¯ babel äº†ï¼Œbabel é…åˆ preset-flow ä¹Ÿèƒ½å®Œæˆç§»é™¤æ³¨è§£çš„åŠŸèƒ½ã€‚babel çš„ä½¿ç”¨éœ€è¦ä»¥ä¸‹å‡ ä¸ªæµç¨‹ï¼š

1. å®‰è£…

```sh
$ yarn add @babel/core @babel/cli @babel/preset-flow --dev
```

- @babel/core æ˜¯ babel çš„æ ¸å¿ƒåº“
- @babel/cli æä¾›äº†ä¸€äº›å‘½ä»¤è¡Œå·¥å…·ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿç›´æ¥åœ¨å‘½ä»¤è¡Œä½¿ç”¨ babel ç¼–è¯‘
- @babel/preset-flow é‡Œé¢åŒ…å«äº†ç§»é™¤æ³¨è§£çš„æ’ä»¶

2. æ·»åŠ é…ç½®æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º .babelrc æ–‡ä»¶

```json
{
    "presets": ["@babel/preset-flow"]
}
```

åœ¨é…ç½®æ–‡ä»¶é‡ŒæŒ‡å®šè¦ä½¿ç”¨çš„æ’ä»¶

3. ä½¿ç”¨

```sh
$ yarn babel src -d dist
```

æœ€ç»ˆçš„æ•ˆæœè·Ÿ flow-remove-types ä¸€æ ·ï¼Œåªæ˜¯è½¬åŒ–åçš„ä»£ç æ›´ä¼˜ï¼Œæ²¡æœ‰å¤šä½™çš„ç©ºæ ¼ã€‚

### å¼€å‘å·¥å…·æ’ä»¶

å¼€å‘å·¥å…·æ’ä»¶å°±æ˜¯ä¸€æ—¦ç±»å‹ä¸æ­£ç¡®ï¼Œç¼–è¾‘å™¨å°±ä¼šæŠ¥é”™ï¼Œä¸ç”¨å†æ‰§è¡Œå‘½ä»¤è¡Œå»æ£€æµ‹æ‰çŸ¥é“æœ‰é”™ã€‚

VSCode æ’ä»¶ â€œFlow Language Supportâ€

### ç±»å‹æ¨æ–­

flow å…·æœ‰ç±»å‹æ¨æ–­çš„ç‰¹æ€§ï¼Œä¾‹å¦‚ï¼š

```js
function square (n) {
    return n * n;
}

square('10')
```

è¿™è¾¹æˆ‘ä»¬æ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œè¿™åœ¨è¯­æ³•å±‚é¢åº”è¯¥æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯ flow ä¼šç›‘æµ‹åˆ°ä½ è¿™è¾¹æ˜¯åšä¹˜æ³•è¿ç®—ï¼Œè€Œå­—ç¬¦ä¸²è·Ÿå­—ç¬¦ä¸²æ˜¯ä¸èƒ½ç›¸ä¹˜çš„ï¼Œè¿™è¾¹ flow è‡ªåŠ¨æ¨æ–­ä¸ºè¿™è¾¹çš„ n åº”è¯¥æ˜¯ number ç±»å‹ï¼Œæ‰€ä»¥ä¹Ÿä¼šæŠ¥é”™ï¼Œæ­£å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://jencia.github.io/images/blog/training-camp/notes/TypeScript-3.png)

ä¸è¦è§‰å¾— flow æœ‰è¿™æ ·ç‰¹æ€§ä½ å°±æ‡’å¾—å†™ç±»å‹æ³¨è§£äº†ï¼Œæœ€å¥½æ˜¯è‡ªå·±æ·»åŠ ç±»å‹æ³¨è§£ï¼Œè¿™æ ·èƒ½è®©ä»£ç å…·æœ‰æ›´å¥½çš„å¯è¯»æ€§ã€‚

### ç±»å‹æ³¨è§£

```ts
function square (n: number): number {
    return n * n;
}

let num: number = 100

num = 'string'  // error

function foo(): void {
    // æ²¡è¿”å›å€¼çš„å‡½æ•°
}
```

### åŸå§‹ç±»å‹

```ts
const a: string = 'xxx'

const b1: number = 123
const b2: number = NaN
const b3: number = Infinity

const c: boolean = true
const d: null = null
const e: void = undefined
const f: Symbol = Symbol()
```

### æ•°ç»„ç±»å‹

```ts
const arr1: Array<number> = [1, 4, 5];
const arr2: number[] = [1, 4, 5];
const arr3: [string, number] = ['str', 100];
```

### å¯¹è±¡ç±»å‹

```ts
const obj1: { foo: string, bar: number} = { foo: 'str', bar: 100 }

// å¯é€‰å±æ€§
const obj2: { foo?: string, bar: number} = { bar: 100 }

// åŠ¨æ€å±æ€§
const obj3: { [string]: string } = {}
obj3.key1 = 'value1';
obj3.key2 = 'value2';
```

### å‡½æ•°ç±»å‹

```ts
function foo (callback: (string, number) => void) {
    callback('string', 100)
}

foo(function (str, n) {
    // str => string
    // n => number
})
```

### ç‰¹æ®Šç±»å‹

```ts
const a: 'foo' = 'foo'

const type: 'success' | 'warning' | 'danger' = 'success'

type stringOrNumber = string | number

const b1: stringOrNumber = 100
const b2: stringOrNumber = 'xxx'

const gender: ?number = undefined
const gender2: number | null | void = undefined
```

### Mixed & Any

```ts
// mixed ä»»æ„ç±»å‹
function passMixed (value: mixed) {
    // mixed è™½ç„¶æ˜¯ä»»æ„ç±»å‹ï¼Œä½†ä¹Ÿå±äºå¼ºç±»å‹ï¼Œ
    // éœ€è¦å…ˆåˆ¤æ–­æ˜¯å¦æ˜¯å­—ç¬¦ä¸²æ‰èƒ½ä½¿ç”¨å­—ç¬¦ä¸²çš„æ–¹æ³•
    if (typeof value === 'string') {
        value.substr(1)
    }
    // è¿™è¾¹ä¹Ÿæ˜¯è¦ä¿è¯ value æ˜¯æ•°å­—ç±»å‹æ‰èƒ½ç›¸ä¹˜
    if (typeof value === 'number') {
        value * value
    }
}
passMixed('string')
passMixed(100)

// any ä»»æ„ç±»å‹
function passAny (value: any) {
    // any å±äºå¼±ç±»å‹ï¼Œè·Ÿä¼ ç»Ÿ JS æ²¡ä»€ä¹ˆåŒºåˆ«
    value.substr(1)
    value * value
}
passAny('string')
passAny(100)
```

### è¿è¡Œç¯å¢ƒ API

ä½¿ç”¨äº†è¿è¡Œç¯å¢ƒï¼ˆæ¯”å¦‚æµè§ˆå™¨ï¼‰çš„ API è¿”å›çš„æ•°æ®ä¸å±äºåŸºæœ¬æ•°æ®ç±»å‹é‡Œé¢çš„ï¼Œå†™ç±»å‹æ³¨è§£çš„æ—¶å€™å°±éœ€è¦ä½¿ç”¨è¿è¡Œç¯å¢ƒæä¾›ç»™æˆ‘ä»¬çš„ç±»å‹ï¼Œä¾‹å¦‚ï¼š

```ts
const element: HTMLElement | null = document.getElementById('app');
```

è¿™è¾¹æŸ¥æ‰¾ DOM å…ƒç´ ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±æ˜¯ nullï¼Œå¦‚æœæ‰¾åˆ°äº†é‚£å°±æ˜¯ DOM å…ƒç´ ï¼ŒDOM å…ƒç´ éƒ½ç»§æ‰¿äº HTMLElement ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ HTMLElementï¼Œä¸è¿‡æœ‰æ—¶å€™å°±éœ€è¦ç²¾ç¡®çš„æŒ‡å®šæŸä¸€ä¸ªç±»å‹ï¼Œè¿™æ—¶å€™å°±éœ€è¦æŸ¥æ‰¾ä¸‹æœ‰å“ªäº›ç±»å‹å¯ç”¨ã€‚ä¸‹åˆ—åˆ—ä¸¾äº†å‡ ä¸ªç±»å‹æŸ¥æ‰¾çš„ç½‘å€ï¼š

- https://www.saltycrane.com/cheat-sheets/flow-type/latest/
- https://github.com/facebook/flow/blob/master/lib/core.js
- https://github.com/facebook/flow/blob/master/lib/dom.js
- https://github.com/facebook/flow/blob/master/lib/bom.js
- https://github.com/facebook/flow/blob/master/lib/cssom.js
- https://github.com/facebook/flow/blob/master/lib/node.js

## TypeScript

TypeScriptï¼ˆç®€ç§° ts ï¼‰æ˜¯ JavaScript çš„è¶…é›†ï¼Œå¯ä»¥ç†è§£ä¸º

TypeScript = JavaScript + ç±»å‹ç³»ç»Ÿ + ES6+æ–°ç‰¹æ€§

æœ€ç»ˆä¼šç¼–è¯‘æˆæµè§ˆå™¨å¯ä»¥è®¿é—®çš„ JS ä»£ç ã€‚

![](https://jencia.github.io/images/blog/training-camp/notes/TypeScript-4.png)

### å¿«é€Ÿä¸Šæ‰‹

å…ˆæ‰¾ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä½œä¸ºé¡¹ç›®å·¥ç¨‹ç›®å½•ï¼Œåç»­ç¼–å­¦ flow éƒ½åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹å»ºæ–‡ä»¶ã€‚

1. åˆå§‹åŒ–é¡¹ç›®å·¥ç¨‹ã€‚

```sh
$ yarn init --yes
```

è¿™æ—¶å€™åœ¨ä½ çš„é¡¹ç›®å·¥ç¨‹ä¸‹å°±æœ‰ä¸€ä¸ª package.json æ–‡ä»¶ã€‚

2. å®‰è£… typescript

```sh
$ yarn add typescript --dev
```

3. ç¼–ç 

æ¯”å¦‚æˆ‘åˆ›å»ºä¸€ä¸ª demo1.ts æ–‡ä»¶ï¼Œæ³¨æ„è¿™è¾¹æ˜¯ ts åç¼€çš„ã€‚

```ts
const hello = (name: string) => {
    console.log(`Hello, ${name}`);
}

hello('TypeScript');    // Hello, TypeScript
```

4. ç¼–è¯‘

```sh
$ yarn tsc demo1.ts
```

è¿™æ—¶å€™ demo1.ts æ—è¾¹å¤šäº†ä¸€ä¸ª demo1.js æ–‡ä»¶ï¼Œè¿™å°±æ˜¯ç¼–è¯‘åçš„æ–‡ä»¶ï¼Œå®ƒä¼šå°† ts æ–‡ä»¶ç±»å‹æ³¨è§£ä»£ç ç§»é™¤ï¼Œå¹¶è½¬åŒ–æˆ es3 ä»£ç ã€‚

### é…ç½®æ–‡ä»¶

tsc æä¾›äº†ä¸€ä¸ªå¿«é€Ÿç”Ÿæˆé…ç½®æ–‡ä»¶çš„å‘½ä»¤ï¼š

```sh
$ yarn tsc --init
```

è¿™æ—¶å€™é¡¹ç›®å·¥ç¨‹ä¸‹ä¼šç”Ÿæˆä¸€ä¸ª tsconfig.json æ–‡ä»¶ï¼Œè¿™å°±æ˜¯ ts çš„é…ç½®æ–‡ä»¶ã€‚è¿™ä¸ªé…ç½®æ–‡ä»¶æ˜¯ä½œç”¨äºæ•´ä¸ªé¡¹ç›®å·¥ç¨‹çš„ï¼Œä¸‹åˆ—ç®€å•ä»‹ç»ä¸‹å‡ é¡¹é…ç½®ã€‚

```json
{
    /* ç¼–è¯‘é…ç½® */
    "compilerOptions": {
        "target": "es5",        /* ç¼–è¯‘æˆ es5 ä»£ç ï¼Œé»˜è®¤ es3 */
        "module": "commonjs",   /* ä»¥ commonjs ä½œä¸ºæ¨¡å—åŒ–æ ‡å‡†ç¼–è¯‘ */
        "sourceMap": true,      /* ç”Ÿæˆ sourceMap æ–‡ä»¶ */
        "outDir": "dist",       /* å¯¼å‡ºåå­˜æ”¾çš„åœ°æ–¹ */
        "rootDir": "src",       /* æºç å­˜æ”¾çš„åœ°æ–¹ */
        "strict": true,         /* å¼€å¯ä¸¥æ ¼æ£€æŸ¥ */
    }
}
```

å¦‚æœåƒä¸Šä¸€èŠ‚é‚£æ ·æŒ‡å®šæ–‡ä»¶ç¼–è¯‘å°±ä¸ä¼šèµ°é…ç½®æ–‡ä»¶ï¼Œè¦ä½¿ç”¨é…ç½®æ–‡ä»¶çš„è¯ï¼Œå‘½ä»¤è¡Œä»£ç å°±è¦æ”¹æˆè¿™æ ·ï¼š

```sh
$ yarn tsc
```

å¦‚æœæƒ³æ˜¾ç¤ºä¸­æ–‡çš„é”™è¯¯ä¿¡æ¯ï¼Œå¯ä»¥è¿™æ ·å†™:

```sh
$ yarn tsc --locale zh-CN
```

åœ¨ VSCode è®¾ç½®ä¸­æ–‡çš„è¯å¯ä»¥åœ¨è®¾ç½®é‡Œé¢æœç´¢ â€œtypescript localeâ€ å°±èƒ½æ‰¾åˆ°ã€‚

æ›´å¤šçš„é…ç½®é¡¹åç»­å†è¡¥å……ã€‚

### åŸå§‹ç±»å‹

```ts
const a: string = 'foobar';
const b: number = 100 // NaN Infinity
const c: boolean = true // false

// éä¸¥æ ¼æ¨¡å¼ä¸‹ stringã€numberã€boolean å¯ä»¥ä¸ºç©º
const d: string = null

// éä¸¥æ ¼æ¨¡å¼å¯ä»¥ä¸º null
const e: void = undefined

const f: null = null
const g: undefined = undefined

const h: symbol = Symbol()
```

å¦‚æœä½¿ç”¨ä¸Šä¸€èŠ‚çš„é…ç½®ï¼Œé‚£è¿™è¾¹çš„ Symbol() å°±ä¼šæŠ¥é”™ã€‚åŸå› æ˜¯ Symbol æ˜¯ ES2015 æ‰å‡ºçš„ï¼Œè€Œæˆ‘ä»¬é…ç½®æ–‡ä»¶çš„ target é…çš„æ˜¯ es5 ï¼Œes5 è¿˜æ²¡æœ‰ Symbol ã€‚

åœ¨ TypeScript ç¼–è¯‘ä¸­ä¼šæœ‰ä¸€ä¸ªæ ‡å‡†åº“ï¼Œé‡Œé¢å®šä¹‰äº†ä¸€ç³»åˆ—ç±»å‹å®šä¹‰ï¼Œä¹Ÿå¯ä»¥ç†è§£æˆä¸€ä¸ªç±»å‹é›†ã€‚é…ç½®æ–‡ä»¶å¦‚æœæ²¡æœ‰æŒ‡å®šæ ‡å‡†åº“ï¼Œé»˜è®¤æ˜¯ä½¿ç”¨ target çš„æ ‡å‡†åº“ï¼Œä¹Ÿå°±æ˜¯è¿™è¾¹çš„ es5 æ‰€æ‹¥æœ‰çš„ç±»å‹é›†ã€‚es5 è¿˜æ²¡æœ‰ Symbol ï¼Œè‡ªç„¶ä¹Ÿå°±æ²¡æœ‰å¯¹åº”çš„ç±»å‹å®šä¹‰ã€‚

è¦è§£å†³è¿™é—®é¢˜ï¼Œå…¶å®åªè¦é…ç½®æŒ‡å®šæ ‡å‡†åº“å°±è¡Œï¼Œæ ‡å‡†åº“å¯¹åº”çš„é…ç½®é¡¹æ˜¯ lib ï¼Œæœ€ç»ˆé•¿è¿™æ ·ï¼š

```json
{
    /* ç¼–è¯‘é…ç½® */
    "compilerOptions": {
        "target": "es5",
        "module": "commonjs",
        "lib": ["ES2017", "DOM"],
        "sourceMap": true,
        "outDir": "dist",
        "rootDir": "src",
        "strict": true
    }
}
```

æ ‡å‡†åº“é™¤äº†è¦åŠ  ES2015 ï¼Œè¿˜æœ‰åŠ ä¸Š DOM ï¼Œè¿™è¾¹çš„ DOM å…¶å®è¿˜åŒ…å« BOM çš„åº“ï¼Œä¸æŒ‡å®šè¿™ä¸ªæ ‡å‡†åº“çš„è¯ï¼Œæ˜¯æ‰¾ä¸åˆ° DOM å’Œ BOM ç›¸å…³ API çš„ï¼Œè¿ console éƒ½æŠ¥é”™ã€‚

### Object ç±»å‹

```ts
const foo1: object = function () {}
const foo2: object = {}
const foo3: object = []

const foo4: object = 123    // error

const obj: { foo: number, bar: string } = { foo: 123, bar: 'str' }

```

### æ•°ç»„ç±»å‹

```ts
const arr1: Array<number> = [1, 2, 3]
const arr2: number[] = [1, 2, 3]

function sum (...args: number[]) {
    return args.reduce((prev, current) => prev + current, 0)
}

sum(1, 2, 3);
```

### å…ƒç´ ç±»å‹

```ts
const tuple: [number, string] = [18, 'yjc']
const [age, name] = tuple;

Object.entries({
    foo: 123,
    bar: 345
})
```

### æšä¸¾ç±»å‹

```ts
enum PostStatus {
    Draft = 'xx',       // å¯ä¼ å­—ç¬¦ä¸²
    Unpublished = 3,    // å¯ä¼ æ•°å­—

    // å¯ä¸ä¼ ï¼Œä¸ä¼ ä¼šæ ¹æ®ä¸Šä¸€ä¸ªå€¼åŠ ä¸€ï¼›
    // å¦‚æœä¸Šä¸€ä¸ªä¸æ˜¯ number ç±»å‹ï¼Œå°±æŠ¥é”™ï¼›
    // å¦‚æœæ˜¯ç¬¬ä¸€ä½ï¼Œé‚£å°±æ˜¯ 0
    Published           // 4
} 

const post = {
    title: 'Hello TypeScript',
    content: 'TypeScript is a typed superset of JavaScript.',
    status: PostStatus.Published
}
```

ä½¿ç”¨æšä¸¾æœ€ç»ˆç”Ÿæˆçš„ä»£ç ä¼šè½¬åŒ–ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ç›®çš„æ˜¯è®©æˆ‘ä»¬èƒ½å¤Ÿç”¨ç´¢å¼•è®¿é—®æšä¸¾çš„å€¼ã€‚

```ts
PostStatus[0]   // 'xx'
PostStatus[1]   // 3
```

å¦‚æœç¡®å®šä»£ç ä¸ä¼šé‡‡ç”¨è¿™ç§æ–¹å¼è®¿é—®æšä¸¾ï¼Œé‚£å°±å¯ä»¥é‡‡ç”¨å¸¸é‡æšä¸¾ï¼š

```ts
const enum PostStatus {
    Draft = 'xx',
    Unpublished = 3,
    Published
} 
```

åªè¦åœ¨ enum å‰é¢åŠ ä¸Š const å°±æ˜¯å¸¸é‡æšä¸¾ï¼Œå¸¸é‡æšä¸¾ä¸ä¼šç¼–è¯‘æˆå¯¹è±¡ï¼Œè€Œæ˜¯å°†ä½¿ç”¨åˆ°æšä¸¾çš„åœ°æ–¹æ›¿æ¢æˆå€¼

### å‡½æ•°ç±»å‹

```ts
function func1 (a: number, b: number): string {
    return 'func1'
}
func1(100, 200) // ok
// å›ºå®šå‚æ•°ä¸ªæ•°
func1(100) // error
func1(100, 200, 300) // error

// ?: è¡¨ç¤ºå¯é€‰å‚æ•°
function func2 (a: number, b?: number): string {
    return 'func2'
}
func2(100)

// è®¾ç½®äº†é»˜è®¤å€¼ä¹Ÿè¢«è®¤ä¸ºæ˜¯å¯é€‰å‚æ•°
function func3 (a: number, b: number = 200): string {
    return 'func3'
}
func3(100)

// ä½¿ç”¨äº† ... å°±å¯ä¼ ä»»æ„å¤šä¸ªå‚æ•°
function func4 (a: number, b: number, ...rest: number[]): string {
    return 'func4'
}
func4(1, 2, 3, 4, 5, 6)

// å‡½æ•°ä¹Ÿå¯ä½œä¸ºå‚æ•°ï¼Œå‡½æ•°ç±»å‹æ³¨è§£ç”¨ ç®­å¤´å‡½æ•°å†™æ³•
function foo (callback: (str: string, n:number) => string) {
    callback('string', 100)
}
foo(v => {})  // error
foo((a, b, c) => 'xx') // error
foo((str: string, n: string) => str + n) // error
foo((str: string, n: number) => str) // ok
```

### ä»»æ„ç±»å‹

```ts
// any ä»»æ„ç±»å‹ï¼Œè·Ÿä»¥å¾€ JS çš„ä½¿ç”¨ä¸€æ ·ï¼Œæ˜¯ç§å¼±ç±»å‹/åŠ¨æ€ç±»å‹
let foo: any = 'str'
foo = 100
foo = true
```

### éšå¼ç±»å‹æ¨æ–­

```ts
// å®šä¹‰å˜é‡çš„æ—¶å€™ ts ä¼šåšéšå¼ç±»å‹æ¨æ–­
// å®šä¹‰å˜é‡çš„æ—¶å€™æœ‰èµ‹å€¼ï¼Œè¿™æ—¶å€™å°±ä»¥è¿™ä¸ªå€¼ä¸ºå˜é‡ç±»å‹
let foo = 18
foo = 'str' // error

// å¦‚æœå®šä¹‰å˜é‡çš„æ—¶å€™æ²¡èµ‹å€¼ï¼Œé‚£å°±æ˜¯ any ç±»å‹
let bar
bar = 100  // ok
bar = 'xxx' // ok
```

### ç±»å‹æ–­è¨€

```ts
const nums = [110, 120, 119, 112]

// è¿™æ—¶å€™ res è¢« ts æ¨æ–­ä¸º number | undefined
const res = nums.find(i => i > 0)

// ç±»å‹æ–­è¨€çš„ä¸¤ç§æ–¹å¼å‘Šè¯‰ ts è¿™è¾¹è¿”å›çš„å€¼ä¸€å®šæ˜¯ number
const num1 = res as number
const num2 = <number>res   // åœ¨ jsx ä¸­ä¸èƒ½ç”¨ 
```

ç±»å‹æ–­è¨€åªæ˜¯å‘Šè¯‰ TypeScript æˆ‘è¿™å—çš„ç±»å‹æ˜¯å¾ˆç¡®å®šçš„ï¼Œè®© ts ä¸ä¼šæŠ¥ç±»å‹é”™è¯¯ã€‚è¿™è·Ÿç±»å‹è½¬æ¢ä¸ä¸€æ ·ï¼Œç±»å‹è½¬æ¢æ˜¯è¿è¡Œæ—¶çš„ï¼Œå€¼ä¼šå‘ç”Ÿæ”¹å˜çš„ã€‚

ä»¥ä¸Šç±»å‹æ–­è¨€çš„å†™æ³•ä¹Ÿå¯ä»¥è¿åœ¨ä¸€èµ·å†™ï¼š

```ts
const res = nums.find(i => i > 0) as number
```

å¯èƒ½æœ‰äº›äººä¼šè§‰å¾—è¿™æ ·å†™ï¼Œå¥½åƒä¹Ÿå¯ä»¥æŠŠ number æ”¾åœ¨å‰é¢

```ts
const res: number = nums.find(i => i > 0)
```

è¿™ç§å†™æ³•æ˜¯ä¼šæŠ¥é”™çš„ï¼Œè¿™ç§å±äºç±»å‹æ³¨è§£ï¼Œå…¶å®è¿™ä¸¤ç§å·®å¾ˆå¤šï¼Œè¿™è¾¹çš„æ–­è¨€æ˜¯æŠŠ `number | undefined` è½¬ä¸º `number` ï¼Œè¿™æ ·å°±æ˜¯ res æ‹¿åˆ°äº†ä¸€ä¸ª number æ•°æ®ã€‚

è€Œå¦‚æœæ”¹æˆç±»å‹æ³¨è§£ï¼Œé‚£å°±æ˜¯ `number = number |
 undefined`ï¼Œç­‰å·å·¦å³ç±»å‹ä¸åŒ¹é…è‡ªç„¶æŠ¥é”™ã€‚

æ³¨æ„è¿™è¾¹çš„å€¼æ˜¯ number æˆ– undefined ï¼Œæ‰€ä»¥æ–­è¨€åªèƒ½ä»è¿™ä¸¤ç§ä¹‹ä¸­é€‰ä¸€ä¸ªï¼Œä¸èƒ½å†™å…¶ä»–ç±»å‹çš„ã€‚

### æ¥å£

åŸºæœ¬ä½¿ç”¨

```ts
interface Post {
    title: string
    content: string
    subtitle?: string           // å¯é€‰
    readonly summary: string    // åªè¯»
}

function printPost (post: Post) {
    console.log(post.title)
    console.log(post.content)
}

const hello: Post = {
    title: 'Hello TypeScript',
    content: 'A javascript superset',
    summary: 'A javascript',
}

hello.summary = 'xxx'   // error
printPost(hello)
```

åŠ¨æ€å±æ€§å¯¹è±¡

```ts
interface Cache {
    [prop: string]: string
}
const cache: Cache = {};

cache.foo = 'value1'
cache.bar = 'value2'
```

### ç±»

```ts
class Person {
    public name: string     // ä¿®é¥°ç¬¦é»˜è®¤ public
    // name: string = 'init name'   // å¯è®¾ç½®åˆå§‹å€¼
    private age: number
    protected readonly gender: boolean  // åªè¯»

    constructor (name: string, age: number) {
        this.name = name
        this.age = age
        this.gender = true
    }

    sayHi (msg: string): void {
        console.log(`I am ${this.name}, ${msg}`)
        console.log(this.age)
    }
}

class Student extends Person {
    private constructor (name: string, age: number) {
        super(name, age)
        console.log(this.age)       // error
        console.log(this.gender)    // ok
    }

    static create (name: string, age: number) {
        return new Student(name, age);
    }
}

const tom = new Person('tom', 18);
console.log(tom.name)   // ok
console.log(tom.age)    // error
console.log(tom.gender) // error

const jack1 = new Student('jack', 19);      // error
const jack2 = Student.create('jack', 19);   // ok
```

ä¿®é¥°ç¬¦ï¼š

- public é»˜è®¤å€¼ï¼Œéƒ½å¯ä»¥è®¿é—®
- protected å®ä¾‹æ— æ³•è®¿é—®ï¼Œå­ç±»å¯ä»¥è®¿é—®
- private å®ä¾‹æ— æ³•è®¿é—®ï¼Œå­ç±»ä¹Ÿä¸èƒ½è®¿é—®

æœ‰å‡ å¤©éœ€è¦æ³¨æ„çš„ï¼š

1. æ‰€æœ‰å±æ€§éƒ½å¿…è¦äº‹å…ˆè¿›è¡Œç±»å‹å®šä¹‰ï¼Œthis æ— æ³•è®¿é—®æœªå®šä¹‰çš„å±æ€§ã€‚
2. ç±»çš„æ‰€æœ‰å±æ€§éƒ½å¿…é¡»åˆå§‹åŒ–ï¼Œè¦ä¹ˆè®¾ç½®é»˜è®¤å€¼ï¼Œè¦ä¹ˆåœ¨æ„é€ å‡½æ•°å†…èµ‹å€¼ã€‚
3. æ„é€ å‡½æ•°è¢«æ ‡è®°ä¸º private æˆ– protected åå°±æ— æ³•é€šè¿‡ new è¿›è¡Œå®ä¾‹åŒ–ï¼Œå¯é€šè¿‡é™æ€æ–¹æ³•å®ä¾‹åŒ–

### ç±»ä¸æ¥å£

```ts
interface Eat {
    eat (food: string): void
}
interface Run {
    run (distance: number): void
}

// ä½¿ç”¨ implements å®ç°æ¥å£ï¼Œå¯ä»¥ä¼ å¤šä¸ª
// å®ç°äº†çš„æ¥å£ï¼Œæ¥å£ä¸Šå®šä¹‰çš„æ–¹æ³•ä¸€å®šè¦å…¨éƒ¨å®ç°
class Person implements Eat, Run {
    eat (food: string): void {
        console.log(`ä¼˜é›…çš„è¿›é£Ÿï¼š${food}`)
    }
    run(distance: number): void {
        console.log(`ç›´ç«‹è¡Œèµ°ï¼š${distance}`)
    }
}

class Animal implements Eat, Run {
    eat(food: string): void {
        console.log(`å‘¼å™œå‘¼å™œçš„åƒï¼š${food}`)
    }
    run(distance: number): void {
        console.log(`çˆ¬è¡Œï¼š${distance}`)
    }
}
```

æ ¹æ®é¢å‘å¯¹è±¡çš„æ€ç»´ï¼Œè¿™è¾¹å®šä¹‰äº† Personï¼ˆäººï¼‰å’Œ Animalï¼ˆåŠ¨ç‰©ï¼‰çš„ç±»ï¼Œæ ¹æ®è¿™ä¸¤ä¸ªç±»çš„ç‰¹æ€§ï¼Œä»–ä»¬éƒ½æœ‰ â€œåƒâ€ å’Œ â€œèµ°â€ çš„èƒ½åŠ›ï¼Œäºæ˜¯æŠ½è±¡å‡ºäº† Eatï¼ˆåƒï¼‰å’Œ Runï¼ˆèµ°ï¼‰çš„æ¥å£ï¼Œç„¶åè®©ä¸¤ä¸ªç±»åˆ†åˆ«å®ç°äº† Eat å’Œ Run æ¥å£ã€‚

### æŠ½è±¡ç±»

```ts
interface Eat {
    eat (food: string): void
}
interface Run {
    run (distance: number): void
}

// class å‰é¢åŠ ä¸Š abstract å°±æ˜¯æŠ½è±¡ç±»
// æŠ½è±¡ç±»ä¸éœ€è¦å®ç°æ¥å£é‡Œçš„å…¨éƒ¨æ–¹æ³•ï¼Œå¯ä»¥å®šä¹‰æˆæŠ½è±¡æ–¹æ³•
abstract class Animal implements Eat, Run {
    // æŠ½è±¡ç±»å¯ä»¥å®ç°ä¸€éƒ¨åˆ†æ–¹æ³•
    eat (food: string): void {
        console.log(`å‘¼å™œå‘¼å™œçš„åƒï¼š${food}`)
    }
    // ä¸€éƒ¨åˆ†å®šä¹‰ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œè®©ç»§æ‰¿è€…å®ç°
    // æ™®é€šæ–¹æ³•å‰é¢åŠ ä¸Š abstract å°±æ˜¯æŠ½è±¡æ–¹æ³•
    abstract run (distance: number): void
}

class Dog extends Animal {
    run(distance: number): void {
        console.log(`å››è„šçˆ¬è¡Œï¼š${distance}`)
    }
}

const dog = new Dog();
dog.eat('ğŸ¦´')
dog.run(100)
```

### æ³›å‹

```ts
// è¿™è¾¹ createArray ä¼ è¿›æ¥çš„å¯èƒ½æ˜¯ numberï¼Œå¯èƒ½æ˜¯ string ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ³›å‹ã€‚
// æ³›å‹ä½¿ç”¨ä¸€å¯¹å°–æ‹¬å·ï¼Œé‡Œé¢çš„ T æ˜¯ä¸€ä¸ªå˜é‡åï¼Œç”¨æ¥æ¥æ”¶å¤–éƒ¨ä¼ è¿›æ¥çš„ç±»å‹ã€‚
// è¿™è¾¹çš„ value å€¼å’Œè¿”å›å€¼æ•°ç»„å…ƒç´ ç±»å‹éƒ½æ˜¯åŒä¸€ä¸ªç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ T ä½œä¸ºç±»å‹
function createArray<T> (length: number, value: T): T[] {
    const arr = Array<T>(length).fill(value);
    return arr;
}

// è¿™è¾¹å¯ä»¥ä¸ä¼ ç±»å‹ï¼Œä¼šè‡ªåŠ¨æ¨æ–­å‡º T çš„å€¼æ˜¯ string
const res1 = createArray(3, 'test');

// æœ€å¥½æ˜¯èƒ½ä¼ ç±»å‹ï¼Œè¿™æ ·ç±»å‹æ›´æ˜ç¡®ï¼Œä¹Ÿæ›´ä¾¿äºé˜…è¯»ä»£ç 
const res2 = createArray<string>(3, 'test');
const res3 = createArray<number>(3, 123);
```
